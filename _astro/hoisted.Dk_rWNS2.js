const b="modulepreload",L=function(e){return"/my-reference-site/"+e},v={},w=function(d,n,m){let u=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),t=s?.nonce||s?.getAttribute("nonce");u=Promise.allSettled(n.map(r=>{if(r=L(r),r in v)return;v[r]=!0;const p=r.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${g}`))return;const a=document.createElement("link");if(a.rel=p?"stylesheet":b,p||(a.as="script"),a.crossOrigin="",a.href=r,t&&a.setAttribute("nonce",t),document.head.appendChild(a),p)return new Promise((y,E)=>{a.addEventListener("load",y),a.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${r}`)))})}))}function c(s){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=s,window.dispatchEvent(t),!t.defaultPrevented)throw s}return u.then(s=>{for(const t of s||[])t.status==="rejected"&&c(t.reason);return d().catch(c)})},x=document.getElementById("searchButton"),o=document.getElementById("searchModal"),k=document.getElementById("closeSearch"),f=document.getElementById("searchInput"),l=document.getElementById("searchResults");let i=null;async function h(){if(typeof window<"u"&&!i)try{const e="/my-reference-site/";i=await w(()=>import(`${e}pagefind/pagefind.js`),[]),await i.init(),i||console.log("Pagefind not initialized. It will be available after build.")}catch{console.log("Pagefind not available in development mode. Will work after build.")}}x?.addEventListener("click",()=>{o.classList.remove("hidden"),f?.focus(),h()});k?.addEventListener("click",()=>{o.classList.add("hidden"),f.value="",l.innerHTML='<div class="p-6 text-center text-gray-400"><p>Comece a digitar para buscar...</p></div>'});document.addEventListener("keydown",e=>{e.key==="Escape"&&o.classList.add("hidden"),(e.ctrlKey||e.metaKey)&&e.key==="k"&&(e.preventDefault(),o.classList.remove("hidden"),f?.focus(),h())});o?.addEventListener("click",e=>{e.target===o&&o.classList.add("hidden")});f?.addEventListener("input",async e=>{const d=e.target.value.trim();if(!d){l.innerHTML='<div class="p-6 text-center text-gray-400"><p>Comece a digitar para buscar...</p></div>';return}if(i||await h(),!i){l.innerHTML='<div class="p-6 text-center text-gray-400"><p>Busca disponível apenas após build da produção.</p></div>';return}try{const n=await i.search(d);if(n.results.length===0){l.innerHTML='<div class="p-6 text-center text-gray-400"><p>Nenhum resultado encontrado para "<strong>'+d+'</strong>"</p></div>';return}let m="";for(const u of n.results){const c=await u.data();m+=`
                    <a href="${c.url}" class="block px-6 py-4 border-b border-gray-800 hover:bg-gray-800 transition">
                        <h3 class="text-white font-semibold mb-1">${c.title}</h3>
                        <p class="text-gray-400 text-sm line-clamp-2">${c.excerpt}</p>
                    </a>
                `}l.innerHTML=m}catch(n){console.error("Erro na busca:",n),l.innerHTML='<div class="p-6 text-center text-gray-400"><p>Erro ao buscar. Tente novamente.</p></div>'}});
